/*!
 * 
 * 	drivewealth-back-office-javascript - JavaScript bindings for the DriveWealth Back Office API
 * 	Author: John Shammas
 * 	Version: v1.0.0
 * 	Url: https://github.com/drivewealth/drivewealth-back-office-javascript
 * 	License(s): ISC
 * 
 */
(function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["drivewealth-back-office"]=t():e["drivewealth-back-office"]=t()})(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.request=t.setup=t.Roles=t.MoneyMovement=t.Reports=t.Document=t.Commission=t.Order=t.Transaction=t.Instrument=t.User=t.Sessions=t.Config=t.Auth=t.Violation=t.Advisors=t.Account=t.HOSTS=t.ENVIRONMENTS=void 0;var o=n(1),u=r(o),i=n(8),a=r(i),c=n(6),f=r(c),d=n(9),l=r(d),s=n(12),p=r(s),y=n(13),v=r(y),h=n(14),b=r(h),m=n(15),g=r(m),T=n(10),O=r(T),S=n(16),E=r(S),A=n(7),P=r(A),C=n(17),R=r(C),I=n(18),_=r(I),k=n(3),w=n(2),D=r(w),N=n(19),M=r(N);t.ENVIRONMENTS=k.ENVIRONMENTS,t.HOSTS=k.HOSTS,t.Account=u.default,t.Advisors=M.default,t.Violation=P.default,t.Auth=a.default,t.Config=k.Config,t.Sessions=f.default,t.User=l.default,t.Instrument=p.default,t.Transaction=v.default,t.Order=b.default,t.Commission=g.default,t.Document=O.default,t.Reports=E.default,t.MoneyMovement=R.default,t.Roles=_.default,t.setup=k.setup,t.request=D.default,t.default={ENVIRONMENTS:k.ENVIRONMENTS,HOSTS:k.HOSTS,Account:u.default,Advisors:M.default,Violation:P.default,Auth:a.default,Config:k.Config,Sessions:f.default,User:l.default,Instrument:p.default,Transaction:v.default,Order:b.default,Commission:g.default,Document:O.default,Reports:E.default,MoneyMovement:R.default,Roles:_.default,setup:k.setup,request:D.default}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2),c=r(a),f=n(7),d=r(f),l=function(){function e(){o(this,e)}return i(e,null,[{key:"create",value:function(e,t){return(0,c.default)({method:"POST",endpoint:"/accounts",body:u({},t,{userID:e})}).then(function(e){return e.body})}},{key:"get",value:function(e){return(0,c.default)({endpoint:"/accounts/"+e}).then(function(e){return e.body.account})}},{key:"getByAccountNo",value:function(e){return(0,c.default)({endpoint:"/accounts/search?accountNo="+e.toUpperCase()}).then(function(e){return e.body.result})}},{key:"edit",value:function(e,t){return(0,c.default)({method:"PATCH",endpoint:"/accounts/"+e,body:t}).then(function(e){return e.body})}},{key:"getBlotter",value:function(e,t){return(0,c.default)({method:"GET",endpoint:"/accounts/"+e+"/summary"}).then(function(e){var n=e.body.accountSummary;return t?n[t]:n})}},{key:"transfer",value:function(e){return(0,c.default)({method:"POST",endpoint:"/accounts/transfer",body:u({},e,{accountFrom:e.accountFrom.toUpperCase(),accountTo:e.accountTo.toUpperCase()})}).then(function(e){return e.body})}},{key:"createViolation",value:function(e,t){return d.default.create(e,t)}},{key:"getViolations",value:function(e){return d.default.get(e)}},{key:"deleteViolation",value:function(e,t){return d.default.delete(e,t)}},{key:"updateCommission",value:function(e,t){return(0,c.default)({endpoint:"/accounts/"+e+"/commissions",method:"POST",body:{commissionID:t}}).then(function(e){return e.body.account})}},{key:"getMarginCallList",value:function(){return(0,c.default)({endpoint:"/accounts/margin-call"}).then(function(e){return e.body})}},{key:"getMarginCallAccountSummaries",value:function(){return e.getMarginCallList().then(function(t){return Promise.all(t.map(function(t){var n=t.id;return e.getBlotter(n)})).then(function(e){return{accounts:t,summaries:e}})})}},{key:"editPosition",value:function(e,t,n,r){return(0,c.default)({endpoint:"/accounts/"+e+"/positions",method:"PATCH",body:{symbol:t,quantityAdjustment:n,price:r}}).then(function(){})}},{key:"getPortfolioStatus",value:function(e){return(0,c.default)({endpoint:"/accounts/"+e+"/portfolio"}).then(function(e){return e.body})}}]),e}();l.BLOTTER_TYPES={CASH:"cash",ORDERS:"orders",TRANSACTIONS:"transactions",EQUITY:"equity",VIOLATIONS:"violations",ALL:null},t.default=l,e.exports=t.default},function(e,t,n){"use strict";function r(e){var t=e.method,n=void 0===t?"GET":t,r=e.endpoint,i=e.sessionKey,c=e.body,f=e.addlHeaders,d=void 0===f?{}:f,l=e.host,s=void 0===l?o.HOSTS.API:l,p=e.authenticated,y=void 0===p||p,v=e.usesAppKey,h=void 0===v||v;if(!o.Config.httpImpl)throw new Error("httpImpl is not setup!");if(!i){var b=a.default.get();b&&(i=b)}var m={Accept:"application/json"};h&&(m["dw-client-app-key"]=o.Config.appKey),"POST"!==n&&"PUT"!==n&&"PATCH"!==n||(m["Content-Type"]="application/json"),i&&y&&(m["dw-auth-token"]=i);for(var g in d)m[g]=d[g];if(r=o.Config.env[s]+r,"application/json"===m["Content-Type"]&&(c=JSON.stringify(c)),d&&d["Content-Type"]){if(!c)throw new Error("No body provided, but content-type header was set.");if("application/x-www-form-urlencoded"===d["Content-Type"]&&c instanceof Object&&c.constructor===Object){var T=c;c=Object.keys(T).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(T[e])}).join("&")}}return new Promise(function(e,t){return o.Config.httpImpl(n,r,m,c,function(n,r,i){var a=r["Content-Type"]||r["content-type"]||"";if(i&&-1!==a.indexOf("application/json"))try{i=JSON.parse(i)}catch(e){}if("2"===String(n)[0]||"3"===String(n)[0])return e({body:i,statusCode:n,headers:r});var c="No error message was returned from the server.",f="-1";return i&&(i.error&&(c=i.error.message,f=i.error.errorCode),i.message&&i.errorCode&&(c=i.message,f=i.errorCode),i.verificationResponse&&(c=i.verificationResponse.message,f="-1")),401===n?(o.Config.onUnAuth(),t(new u.DriveWealthSessionError(c,i,n,r,f))):t(new u.DriveWealthError(c,i,n,r,f))})})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(3),u=n(4),i=n(6),a=function(e){return e&&e.__esModule?e:{default:e}}(i);e.exports=t.default},function(e,t){"use strict";function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e){var t=e.env,n=e.httpImpl,r=e.appVersion,o=e.appKey;c.env=t,c.httpImpl=n,c.appVersion=r,c.appKey=o}Object.defineProperty(t,"__esModule",{value:!0});var o,u;t.setup=r;var i=t.HOSTS={API:"api",REPORTS:"reports"},a=t.ENVIRONMENTS={UAT:(o={},n(o,i.API,"http://bo-api.drivewealth.io/back-office"),n(o,i.REPORTS,"http://reports.drivewealth.io"),o),PROD:(u={},n(u,i.API,"https://bo-api.drivewealth.net/back-office"),n(u,i.REPORTS,"https://reports.drivewealth.net"),u)},c=t.Config={env:a.UAT,httpImpl:function(){},appVersion:"UNSET",appKey:"UNSET",onUnAuth:function(){}}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.DriveWealthSessionError=t.DriveWealthError=void 0;var i=n(5),a=function(e){return e&&e.__esModule?e:{default:e}}(i),c=t.DriveWealthError=function(e){function t(e,n,u,i,a){r(this,t);var c=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return c.body=n,c.statusCode=u,c.headers=i,c.errorCode=a,c}return u(t,e),t}(a.default),f=t.DriveWealthSessionError=function(e){function t(e,n,u,i,a){r(this,t);var c=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return c.body=n,c.statusCode=u,c.headers=i,c.errorCode=a,c}return u(t,e),t}(a.default);t.default={DriveWealthError:c,DriveWealthSessionError:f}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=function(e){function t(e){n(this,t);var o=r(this,Object.getPrototypeOf(t).call(this,e));return o.name=o.constructor.name,o.message=e,"function"==typeof Error.captureStackTrace?Error.captureStackTrace(o,o.constructor):o.stack=new Error(e).stack,o}return o(t,e),t}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Error));e.exports=u},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){n(this,e),this.key=null}return r(e,[{key:"get",value:function(){return this.key}},{key:"save",value:function(e){this.key=e}},{key:"remove",value:function(){this.key=null}}]),e}(),u=t.sessions=new o;t.default=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(2),i=function(e){return e&&e.__esModule?e:{default:e}}(u),a=function(){function e(){r(this,e)}return o(e,null,[{key:"create",value:function(e,t){return(0,i.default)({method:"POST",endpoint:"/accounts/"+e+"/violations",body:t}).then(function(){})}},{key:"get",value:function(e){return(0,i.default)({endpoint:"/accounts/"+e+"/violations"}).then(function(e){return e.body})}},{key:"delete",value:function(e,t){return(0,i.default)({method:"DELETE",endpoint:"/accounts/"+e+"/violations/"+t}).then(function(){})}}]),e}();t.default=a,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2),a=r(i),c=n(3),f=n(6),d=r(f),l=function(){function e(){o(this,e)}return u(e,null,[{key:"login",value:function(t,n){return(0,a.default)({method:"POST",endpoint:"/auth",body:{username:t,password:n,appVersion:c.Config.appVersion,ip_address:"unknown",languageID:"en_US",osVersion:"unknown",osType:"unknown",scrRes:"unknown",appTypeID:4}}).then(function(t){var n=t.body;return n.authToken?(d.default.save(n.authToken),n):(e.pendingTempCode=n.tempCode,e.pendingUsername=n.username,delete n.tempCode,delete n.username,n)})}},{key:"issue2FACode",value:function(t){if(!e.pendingTempCode)throw new Error("No login pending. Call Auth.login() first!");return(0,a.default)({method:"POST",endpoint:"/auth/2fa",body:{username:e.pendingUsername,tempCode:e.pendingTempCode,"2FAType":t,locale:"en"}}).then(function(n){var r=n.body;return e.pending2FAType=t,r})}},{key:"verify2FACode",value:function(t){if(!e.pending2FAType)throw new Error("No login pending. Call Auth.login(), then Auth.issue2FACode() first.");return(0,a.default)({method:"POST",endpoint:"/auth/2fa/verification",body:{username:e.pendingUsername,tempCode:e.pendingTempCode,"2FAType":e.pending2FAType,verificationCode:t}}).then(function(t){var n=t.body;return e.pendingTempCode=null,e.pendingUsername=null,e.pending2FAType=null,d.default.save(n.authResponse.authToken),n.authResponse})}},{key:"onUnAuth",value:function(e){c.Config.onUnAuth=e}}]),e}();l.pendingTempCode=null,l.pendingUsername=null,l.pending2FAType=null,l.VERIFICATION_TYPES={SMS:"sms"},t.default=l,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){var n=[],r=!0,o=!1,u=void 0;try{for(var i,a=e[Symbol.iterator]();!(r=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,u=e}finally{try{!r&&a.return&&a.return()}finally{if(o)throw u}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(2),l=r(d),s=n(1),p=r(s),y=n(10),v=r(y),h=n(11),b=function(){function e(){i(this,e)}return f(e,null,[{key:"create",value:function(e){return(0,l.default)({method:"POST",endpoint:"/users",body:e}).then(function(e){return e.body})}},{key:"get",value:function(e){return(0,l.default)({endpoint:"/users/"+e}).then(function(e){return e.body})}},{key:"edit",value:function(e,t){return(0,l.default)({method:"PATCH",endpoint:"/users/"+e,body:t}).then(function(e){return e.body})}},{key:"getNotes",value:function(e){return(0,l.default)({endpoint:"/users/"+e+"/notes"}).then(function(e){return e.body})}},{key:"createNote",value:function(e,t,n){return(0,l.default)({method:"POST",endpoint:"/users/"+e+"/notes",body:{userID:e,subject:JSON.stringify(n),note:t}}).then(function(e){return e.body})}},{key:"getAccounts",value:function(e){return(0,l.default)({endpoint:"/users/"+e+"/accounts"}).then(function(e){return e.body})}},{key:"advancedSearch",value:function(e){return(0,l.default)({endpoint:"/users/search?"+Object.keys(e).filter(function(t){return e[t]}).map(function(t){return t+"="+encodeURIComponent(String(e[t]))}).join("&")}).then(function(e){return e.body.resultSet})}},{key:"getFieldsToSearch",value:function(t){var n=["accountNo","userID","accountID","phoneNumber","fullName"],r=!0,o=!1,u=void 0;try{for(var i,a=n[Symbol.iterator]();!(r=(i=a.next()).done);r=!0){var c=i.value;if(e.REGEXPS[c].test(t))return[c]}}catch(e){o=!0,u=e}finally{try{!r&&a.return&&a.return()}finally{if(o)throw u}}return["username","firstName","lastName","email"]}},{key:"getSearchQuery",value:function(t){return e.getFieldsToSearch(t).reduce(function(e,n){return c({},e,u({},n,t))},{})}},{key:"search",value:function(t){var n=e.getSearchQuery(t),r=Object.keys(n).map(function(t){var r=n[t].trim();switch(t){case"userID":return e.get(r);case"accountNo":return p.default.getByAccountNo(r).then(function(t){return e.get(t.userID)});case"accountID":return p.default.get(r).then(function(t){return e.get(t.userID)});case"fullName":var o=r.split(/\s/),u=a(o,2),i=u[0],c=u[1];return(0,l.default)({endpoint:"/users/search?firstName="+i+"&lastName="+c}).then(function(e){return e.body.resultSet});case"username":case"firstName":case"lastName":case"phoneNumber":case"email":return(0,l.default)({endpoint:"/users/search?"+t+"="+r}).then(function(e){return e.body.resultSet});default:throw new Error("Attempted to search for an unknown query type ("+t+")")}});return Promise.all(r).then(function(e){var t=e.reduce(function(e,t){return[].concat(o(e),o(Array.isArray(t)?t:[t]))},[]),n=t.reduce(function(e,t){var n="string"==typeof t.id?t.id:"string"==typeof t.userID?t.userID:"";return Object.assign({},e,u({},n,t))},{});return Object.keys(n).map(function(e){return n[e]})})}},{key:"getDocuments",value:function(e){return(0,l.default)({endpoint:"/users/"+e+"/documents"}).then(function(e){return e.body})}},{key:"createDocument",value:function(e,t,n){return v.default.create(e,t,n)}},{key:"openDocument",value:function(e){return v.default.getURL(e)}},{key:"getKYCUsers",value:function(){return(0,l.default)({endpoint:"/users/kyc-exception"}).then(function(e){return e.body})}},{key:"patchKYCUsers",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Promise.all(n.map(function(t){return(0,l.default)({endpoint:"/users/kyc-exception/"+t,method:"PATCH",body:{method:e.toUpperCase()}})})).then(function(){})}},{key:"getPendingCounts",value:function(){return(0,h.getPendingCounts)("users")}},{key:"getPending",value:function(e){return(0,h.getPending)("nextPendingUserApproval",e)}},{key:"review",value:function(e){return(0,l.default)({method:"POST",endpoint:"/users/review",body:{userID:e}}).then(function(){})}},{key:"updateUserRole",value:function(e,t){var n={documents:[{type:"PERMISSIONS_INFO",data:{id:e}}]};return(0,l.default)({method:"PATCH",endpoint:"/users/"+t,body:n}).then(function(e){return e.body})}}]),e}();b.REGEXPS={accountNo:/^[A-Za-z]{4}\d{6}$/,userID:/^[A-Za-z\d]{8}-[A-Za-z\d]{4}-[A-Za-z\d]{4}-[A-Za-z\d]{4}-[A-Za-z\d]{12}$/,accountID:/^[A-Za-z\d]{8}-[A-Za-z\d]{4}-[A-Za-z\d]{4}-[A-Za-z\d]{4}-[A-Za-z\d]{12}\.\d{13}$/,phoneNumber:/^\d{4}$/,fullName:/\S+ \S+/},t.default=b,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2),a=r(i),c=n(9),f=r(c),d=n(11),l=function(){function e(){o(this,e)}return u(e,null,[{key:"create",value:function(e,t,n){if("string"==typeof n)return(0,a.default)({method:"POST",endpoint:"/documents",body:{userID:e,type:t,document:n},addlHeaders:{Accept:"application/json"}}).then(function(){});var r=new FormData;return r.append("userID",e),r.append("documentType",t),r.append("documentImage",n),(0,a.default)({method:"POST",endpoint:"/documents",body:r,addlHeaders:{"Content-Type":"multipart/form-data"}}).then(function(){})}},{key:"get",value:function(e){return(0,a.default)({endpoint:"/documents/"+e}).then(function(e){return e.body})}},{key:"getByUserID",value:function(e){return f.default.getDocuments(e)}},{key:"getURL",value:function(e){return(0,a.default)({endpoint:"/documents/"+e+"/url"}).then(function(e){return e.body.url})}},{key:"getPendingCounts",value:function(){return(0,d.getPendingCounts)("documents")}},{key:"getPending",value:function(e){return(0,d.getPending)("nextPending",e)}},{key:"updateLanguage",value:function(e,t){return(0,a.default)({method:"PATCH",endpoint:"/documents/updateLanguage",body:{userID:e,languageID:t}}).then(function(){})}},{key:"review",value:function(e,t,n){return(0,a.default)({method:"POST",endpoint:"/documents/review",body:{userID:e,approvedByUserID:t,documents:n}}).then(function(){})}}]),e}();l.DOCUMENT_TYPES={PHOTO_ID:"PICTURE_ID",ADDRESS:"PROOF_OF_ADDRESS",PHOTO_ID_AND_ADDRESS:"PICTURE_ID_PROOF_OF_ADDRESS",CORPORATE:"CORPORATE",TRUST:"TRUST_DOCUMENTS",RISK:"RISK_ASSESSMENT",TAX:"TAX",OTHER:"OTHER"},l.REJECTION_REASONS={PICTURE:{INVALID:"PICTURE_INVALID_DOCUMENT_TYPE",MISMATCH_NAME:"PICTURE_MISMATCH_NAME",ILLEGIBLE:"PICTURE_ILLEGIBLE",EXPIRED:"PICTURE_EXPIRED",OTHER:"PICTURE_OTHER"},ADDRESS:{INVALID:"ADDRESS_INVALID_DOCUMENT_TYPE",MISMATCH_ADDRESS:"ADDRESS_MISMATCH_ADDRESS",MISMATCH_NAME:"ADDRESS_MISMATCH_NAME",ILLEGIBLE:"ADDRESS_ILLEGIBLE",EXPIRED:"ADDRESS_EXPIRED",OTHER:"ADDRESS_OTHER"}},l.LANGUAGE_IDS={ENGLISH:"en_US",CHINESE:"zh_CN",SPANISH:"es_ES",PORTUGUESE:"pt_BR"},t.default=l,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPending=t.getPendingCounts=void 0;var r=n(2),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.getPendingCounts=function(e){return(0,o.default)({endpoint:"/"+e+"/getPendingCounts"}).then(function(e){return e.body})},t.getPending=function(e,t){var n=Array.isArray(t)?"languageList="+t.join(","):"userID="+t;return(0,o.default)({endpoint:"/users/"+e+"?"+n}).then(function(e){return Object.assign({},e.body,{ttl:Number(e.headers["dw-reviewer-ttl"])})})}},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2),a=function(e){return e&&e.__esModule?e:{default:e}}(i),c=function(){function e(){o(this,e)}return u(e,null,[{key:"create",value:function(e){return(0,a.default)({method:"POST",endpoint:"/instruments",body:e}).then(function(e){return e.body})}},{key:"get",value:function(e){return(0,a.default)({endpoint:"/instruments/"+e}).then(function(e){return e.body})}},{key:"edit",value:function(e,t){return(0,a.default)({method:"PATCH",endpoint:"/instruments/"+e,body:t}).then(function(e){return e.body})}},{key:"getAll",value:function(){return(0,a.default)({endpoint:"/instruments"}).then(function(e){return e.body})}},{key:"getCorporateActionEventTypes",value:function(){return(0,a.default)({endpoint:"/instruments/corporateActionEventTypes"}).then(function(e){return e.body})}},{key:"formatValue",value:function(e,t){switch(e){case"startDate":case"endDate":return t.toISOString();default:return t}}},{key:"getCorporateActions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.default)({endpoint:"/instruments/corporateActions?"+Object.keys(t).reduce(function(n,o){return[].concat(r(n),[o+"="+e.formatValue(o,t[o])])},[]).join("&")}).then(function(e){return e.body})}}]),e}();t.default=c,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(2),i=function(e){return e&&e.__esModule?e:{default:e}}(u),a=function(){function e(){r(this,e)}return o(e,null,[{key:"getAllTransactionTypes",value:function(){return(0,i.default)({endpoint:"/transactions/types"}).then(function(e){return e.body})}},{key:"getTransactionTypes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"DW";return(0,i.default)({endpoint:"/transactions/types?wlpID="+e}).then(function(e){return e.body[0].types})}},{key:"create",value:function(e,t){return(0,i.default)({method:"POST",endpoint:"/accounts/"+e+"/transactions",body:t}).then(function(e){return e.body})}},{key:"get",value:function(e,t,n,r){var o="/accounts/"+e+"/transactions",u="?from="+t.toISOString()+"&to="+n.toISOString(),a=void 0;a=r&&r.limit?r.limit:40;var c="&limit="+a,f=o+u+c;return r&&r.direction&&r.offset&&(f+="&offset="+r.offset+"&direction="+r.direction),(0,i.default)({endpoint:f}).then(function(e){return e.body})}},{key:"batch",value:function(e){return(0,i.default)({method:"POST",endpoint:"/transactions/batch",body:e}).then(function(e){return e.body})}}]),e}();t.default=a,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2),c=r(a),f=n(1),d=r(f),l=n(4),s=function(){function e(){o(this,e)}return i(e,null,[{key:"create",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{waitForFill:!0,fillRetryInterval:1e3,fillMaxRetries:10};return new Promise(function(r,o){(0,c.default)({method:"POST",endpoint:"/orders",body:u({accountNo:e.accountNo},t)}).then(function(t){var i=t.body;if(!n.waitForFill)return r(i);(function a(){n.fillMaxRetries--,d.default.getBlotter(e.accountID).then(function(e){var c=!0,f=!1,d=void 0;try{for(var s,p=e.transactions[Symbol.iterator]();!(c=(s=p.next()).done);c=!0){var y=s.value;if(y.orderId===i.orderID){var v="8"==y.orderStatus,h="2"==y.orderStatus,b="1"!=y.orderType;if(v){var m="-1",g="Unknown rejection reason",T=y.updatedReason,O=T.match(/^\s*(-?\d+) (.+)$/);return Array.isArray(O)&&O[1]&&O[2]&&(m=O[1],g=O[2]),o(new l.DriveWealthError(g,t.body,t.statusCode,t.headers,m))}if(h||b||0===n.fillMaxRetries){var S=u({},i,y);return delete S.orderId,r(S)}break}}}catch(e){f=!0,d=e}finally{try{!c&&p.return&&p.return()}finally{if(f)throw d}}if(0===n.fillMaxRetries)return o(new l.DriveWealthError("No details found for Order No: "+i.orderNo,t.body,t.statusCode,t.headers,"-1"));setTimeout(a,n.fillRetryInterval)}).catch(o)})()}).catch(o)})}},{key:"reconcile",value:function(e,t){return(0,c.default)({method:"PUT",endpoint:"/orders/"+e,body:t}).then(function(){})}}]),e}();s.TYPES={MARKET:"MARKET",LIMIT:"LIMIT",STOP:"STOP"},s.SIDES={BUY:"BUY",SELL:"SELL"},t.default=s,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(2),i=function(e){return e&&e.__esModule?e:{default:e}}(u),a=function(){function e(){r(this,e)}return o(e,null,[{key:"getAllCommissionGroups",value:function(){return(0,i.default)({endpoint:"/commissions"}).then(function(e){return e.body.commissionGroups})}}]),e}();t.default=a,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(6),c=r(a),f=n(3),d=n(2),l=r(d),s=function(){function e(){o(this,e)}return i(e,null,[{key:"downloadReport",value:function(t,n,r){var o=e.constructBody(t,n,r),u=f.Config.env[f.HOSTS.REPORTS]+"/DriveWealth",i=document.createElement("form");i.setAttribute("target","_blank"),i.setAttribute("method","post"),i.setAttribute("action",u);for(var a in o){var c=document.createElement("input");c.setAttribute("name",a),c.setAttribute("value",o[a]),c.setAttribute("type","hidden"),i.appendChild(c)}document.body.appendChild(i),i.submit(),i.parentNode.removeChild(i)}},{key:"getReport",value:function(t,n){return(0,l.default)({method:"POST",host:f.HOSTS.REPORTS,endpoint:"/DriveWealth",body:e.constructBody(e.REPORT_FORMATS.JSON,t,n),authenticated:!1,usesAppKey:!1,addlHeaders:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){return e.body})}},{key:"listFiles",value:function(e,t,n,r){return(0,l.default)({endpoint:"/accounts/"+e+"/"+t+"?from="+n+"&to="+r}).then(function(e){return e.body})}},{key:"getFileURL",value:function(t,n){return(0,l.default)({endpoint:"/"+e.REPORT_NAMES.STATEMENTS+"/"+t+"/"+n}).then(function(e){return e.body.url})}},{key:"downloadRestrictedReport",value:function(t){e.downloadReport(t,e.REPORT_NAMES.RESTRICTED,{subscription:!0})}},{key:"downloadAccountViolations",value:function(t,n,r){e.downloadReport(t,e.REPORT_NAMES.ACCOUNT_VIOLATIONS,{TradingType:n,Date:r.toISOString()})}},{key:"getAccountViolations",value:function(t,n){return e.getReport(e.REPORT_NAMES.ACCOUNT_VIOLATIONS,{TradingType:t,Date:n.toISOString()})}},{key:"downloadTicketAudit",value:function(t,n){e.downloadReport(t,e.REPORT_NAMES.TICKET_AUDIT,{OrderNo:n.toUpperCase()})}},{key:"getTicketAudit",value:function(t){return e.getReport(e.REPORT_NAMES.TICKET_AUDIT,{OrderNo:t.toUpperCase()})}},{key:"getCorrespondant",value:function(t){return(0,l.default)({endpoint:"/"+e.REPORT_NAMES.CORRESPONDENT+"?date="+t}).then(function(e){return e.body.url})}}]),e}();s.REPORT_FORMATS={PDF:"PDF",XLS:"XLS",JSON:"JSON",HTML:"HTML"},s.REPORT_NAMES={RESTRICTED:"RestrictedReport",ACCOUNT_VIOLATIONS:"AccountViolations",TICKET_AUDIT:"TicketAudit",RECONCILIATION:"EodNotification",TRANSACTION:"EodTransaction",POSITIONS_AND_ORDERS:"PositionRestingOrder",POSITIONS:"PositionDetail",PLACED_ORDERS:"OrderTrans",REFERRED_ACCOUNTS:"Account",FINANCIALS:"AccountFins",CORRESPONDENT:"correspondantReport",STATEMENTS:"statements",CONFIRMS:"confirms"},s.constructBody=function(e,t,n){return u({ReportFormat:e,ReportName:t,sessionKey:c.default.get(),WlpID:"DW",LanguageID:"en_US"},n)},t.default=s,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(2),i=function(e){return e&&e.__esModule?e:{default:e}}(u),a=function(){function e(){r(this,e)}return o(e,null,[{key:"getList",value:function(e,t,n,r){
var o="/funding/"+e.toLowerCase()+"?status="+t.toUpperCase();return n&&(o+="&type="+("string"==typeof n?n:n.join(",")).toUpperCase()),r&&(r.direction&&r.offset&&r.limit?o+="&limit="+r.limit+"&offset="+r.offset+"&direction="+r.direction:r.limit&&(o+="&limit="+r.limit)),(0,i.default)({endpoint:o}).then(function(e){return{data:e.body}})}},{key:"get",value:function(e,t){return(0,i.default)({endpoint:"/funding/"+t+"/"+e}).then(function(e){return e.body})}},{key:"edit",value:function(e,t,n){return(0,i.default)({method:"PATCH",endpoint:"/funding/"+n+"/"+e,body:t}).then(function(){})}},{key:"downloadCSV",value:function(e,t,n){var r="/funding/"+e.toLowerCase()+"/"+n+"/download?status="+t;return(0,i.default)({endpoint:r,addlHeaders:{Accept:"text/csv"}}).then(function(e){return e.body})}},{key:"getRecurringDepositsForUser",value:function(e){var t="/users/"+e+"/recurring-deposits";return(0,i.default)({endpoint:t}).then(function(e){return e.body})}},{key:"getDepositHistory",value:function(e){var t="/funding/recurring-deposits/"+e;return(0,i.default)({endpoint:t}).then(function(e){return e.body})}},{key:"updateRecurringDeposit",value:function(e,t){var n="/funding/recurring-deposits/"+e;return(0,i.default)({method:"PATCH",endpoint:n,body:t}).then(function(e){return e.body})}},{key:"deleteRecurringDeposit",value:function(e){var t="/funding/recurring-deposits/"+e;return(0,i.default)({method:"DELETE",endpoint:t}).then(function(e){return e})}}]),e}();a.DIRECTIONS={DEPOSITS:"Deposits",WITHDRAWALS:"Redemptions"},t.default=a,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(2),i=function(e){return e&&e.__esModule?e:{default:e}}(u),a=function(){function e(){r(this,e)}return o(e,null,[{key:"getAllPermissionGroups",value:function(){return(0,i.default)({endpoint:"/permissions/groups"}).then(function(e){return e.body})}},{key:"getAllPermissions",value:function(){return(0,i.default)({endpoint:"/permissions"}).then(function(e){return e.body})}},{key:"createPermissionGroup",value:function(e,t,n,r){var o={active:e,description:t,permissionSet:n,role:r};return(0,i.default)({method:"POST",endpoint:"/permissions/groups",body:o}).then(function(e){return e.body})}},{key:"editRole",value:function(e,t){var n=t;return(0,i.default)({method:"PATCH",endpoint:"/permissions/groups/"+e,body:n}).then(function(e){return e.body})}}]),e}();t.default=a,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2),a=function(e){return e&&e.__esModule?e:{default:e}}(i),c=function(){function e(){r(this,e)}return u(e,null,[{key:"createProduct",value:function(e,t){var n=o({userID:e},t);return(0,a.default)({method:"POST",body:n,endpoint:"/managed/products"}).then(function(e){return e.body})}},{key:"updateProduct",value:function(e,t){return(0,a.default)({method:"PATCH",body:t,endpoint:"/managed/products/"+e}).then(function(e){return e.body})}},{key:"getProductByID",value:function(e){return(0,a.default)({endpoint:"/managed/products/"+e}).then(function(e){return e.body})}},{key:"getAllAdvisorProducts",value:function(e){return(0,a.default)({endpoint:"/users/"+e+"/managed/products"}).then(function(e){return e.body})}},{key:"getAllAllocations",value:function(e,t){return(0,a.default)({endpoint:"/managed/allocations?from="+e.toISOString()+"&to="+t.toISOString()}).then(function(e){return e.body})}},{key:"getAdvisorAllocations",value:function(e){return(0,a.default)({endpoint:"/users/"+e+"/managed/allocations"}).then(function(e){return e.body})}},{key:"getAllocationByID",value:function(e){return(0,a.default)({endpoint:"/managed/allocations/"+e}).then(function(e){return e.body})}},{key:"createAllocation",value:function(e){return(0,a.default)({endpoint:"/managed/allocations",method:"POST",body:e}).then(function(e){return e.body})}},{key:"getAllAdvisorOrders",value:function(e,t){return(0,a.default)({endpoint:"/managed/orders?from="+e.toISOString()+"&to="+t.toISOString()}).then(function(e){return e.body})}},{key:"getOrdersForAdvisor",value:function(e,t,n){return(0,a.default)({endpoint:"/users/"+e+"/managed/orders?from="+t.toISOString()+"&to="+n.toISOString()}).then(function(e){return e.body})}},{key:"getAdvisorPortfolios",value:function(e){return(0,a.default)({endpoint:"/users/"+e+"/managed/portfolios"}).then(function(e){return e.body})}},{key:"getPortfolioById",value:function(e){return(0,a.default)({endpoint:"/managed/portfolios/"+e}).then(function(e){return e.body})}},{key:"createPortfolio",value:function(e){return(0,a.default)({endpoint:"/managed/portfolios",method:"POST",body:e}).then(function(e){return e.body})}},{key:"updatePortfolio",value:function(e,t){return(0,a.default)({endpoint:"/managed/portfolios/"+t,body:e,method:"PATCH"}).then(function(e){return e.body})}},{key:"getAdvisorFunds",value:function(e){return(0,a.default)({endpoint:"/users/"+e+"/managed/funds"}).then(function(e){return e.body})}},{key:"getFundDetails",value:function(e){return(0,a.default)({endpoint:"/managed/funds/"+e}).then(function(e){return e.body})}},{key:"createFund",value:function(e){return(0,a.default)({body:e,endpoint:"/managed/funds",method:"POST"}).then(function(e){return e.body})}},{key:"updateFund",value:function(e,t){return(0,a.default)({body:e,endpoint:"/managed/funds/"+t,method:"PATCH"}).then(function(e){return e.body})}}]),e}();t.default=c,e.exports=t.default}])});
//# sourceMappingURL=drivewealth-back-office.min.js.map
